<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orionix Token - Crypto-Platform</title>
    <script>
      (function() {
        try { 
          const savedTheme = localStorage.getItem('theme');
          const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
          const theme = savedTheme || (prefersDark ? 'dark' : 'light');
          document.documentElement.setAttribute('data-theme', theme);
        } catch (e) {
          console.warn('Could not apply theme from localStorage', e);
        }
      })();
    </script>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <a href="../index.html" class="logo">Crypto-Platform</a>
        <button class="hamburger">
            <i class="fas fa-bars"></i>
        </button>
        <div class="nav-links">
            <a href="news.html" class="nav-item">News</a>
            <a href="prices.html" class="nav-item">Prices</a>
            <a href="orionix.html" class="nav-item active">Orionix</a>
            <a href="wallet.html" class="nav-item">Wallet</a>
            <a href="trade.html" class="nav-item">Trade</a>
            <button id="themeToggleBtnMobile" class="theme-toggle-btn mobile">
                <i class="fas fa-moon"></i>
            </button>
        </div>
        <div class="controls-desktop">
            <button id="notificationBtn" class="notification-btn">
                <i class="fas fa-bell"></i>
                <span class="alert-badge"></span>
            </button>
            <button id="themeToggleBtn" class="theme-toggle-btn">
                <i class="fas fa-moon"></i>
            </button>
            <div class="auth-buttons desktop" style="display:flex; gap:0.5rem;">
                <button id="loginBtn" class="auth-btn" onclick="window.location.href='login.html'">Login</button>
                <button id="signupBtn" class="auth-btn" onclick="window.location.href='signup.html'">Sign Up</button>
            </div>
            <div id="user-info-desktop" class="user-info-desktop" style="display:none; align-items:center; gap:10px;">
                <img id="user-photo-desktop" src="" alt="User Photo" style="width:32px;height:32px;border-radius:50%;object-fit:cover;display:none;">
                <span id="user-name-desktop" style="font-weight:600;"></span>
                <button id="logoutBtnDesktop" class="auth-btn" style="display:none;">Logout</button>
            </div>
        </div>
    </nav>

    <section class="orionix-section">
        <div class="container">
            <div class="about-orionix">
                <h2>About Orionix</h2>
                <p>Orionix (ORX) is an innovative ERC-20 token, developed to offer a fast, secure and efficient trading experience in the Ethereum ecosystem. Based on blockchain technology, ORX ensures full transparency and immutability for all transactions.</p>
                <p>Developed with a focus on scalability and energy efficiency, Orionix uses an optimized consensus mechanism that significantly reduces transaction costs and processing time. All transactions are verified through smart contracts, eliminating the need for intermediaries and ensuring the security of user funds.</p>
                <p>With an initial supply of 1,000,000 ORX, our token is designed to maintain its value over the long term. ORX holders benefit from reduced platform fees, access to exclusive features, and the ability to participate in protocol governance through proposal voting.</p>
            </div>
            
            <div class="token-details">
                <div class="detail-card">
                    <h3>General Information</h3>
                    <div class="detail-row">
                        <span>Name:</span>
                        <span>Orionix</span>
                    </div>
                    <div class="detail-row">
                        <span>Symbol:</span>
                        <span>ORX</span>
                    </div>
                    <div class="detail-row">
                        <span>Standard:</span>
                        <span>ERC-20</span>
                    </div>
                    <div class="detail-row">
                        <span>Decimals:</span>
                        <span>18</span>
                    </div>
                    <div class="detail-row">
                        <span>Initial Supply:</span>
                        <span>1,000,000 ORX</span>
                    </div>
                    <div class="detail-row">
                        <span>Network:</span>
                        <span>Sepolia Testnet</span>
                    </div>
                    <div class="detail-row contract-address">
                        <span>Contract Address:</span>
                        <span id="contract-address">Loading...</span>
                    </div>
                    <div class="detail-row">
                        <span>Contract Status:</span>
                        <span id="contract-status">Verifying...</span>
                    </div>
                </div>
                
                <div class="wallet-info-card">
                    <h3>Your Wallet</h3>
                    <div class="wallet-connect">
                        <button id="connect-wallet-btn" class="connect-btn">Connect MetaMask</button>
                        <div id="load-error-message" class="error-message" style="display: none; margin-top: 10px; padding: 8px 12px; background-color: rgba(220, 53, 69, 0.1); color: #dc3545; border-radius: 6px; text-align: center; font-size: 0.9rem;">
                            <i class="fas fa-exclamation-circle"></i> 
                            Could not load ethers.js library. <a href="#" id="show-details-btn" style="color: #dc3545; text-decoration: underline;">Show details</a>
                        </div>
                    </div>
                    <div class="wallet-details">
                        <div class="detail-row">
                            <span>Address:</span>
                            <span id="wallet-address">Not connected</span>
                        </div>
                        <div class="detail-row">
                            <span>ORX Balance:</span>
                            <span id="token-balance">0 ORX</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="token-actions" style="display: flex; justify-content: center; width: 100%; margin: 2rem 0;">
                <div class="action-card" style="max-width: 500px; width: 100%;">
                    <h3>Transfer Token</h3>
                    <div class="form-group">
                        <label for="recipient-address">Recipient Address:</label>
                        <input type="text" id="recipient-address" placeholder="0x...">
                    </div>
                    <div class="form-group">
                        <label for="transfer-amount">Amount:</label>
                        <div class="amount-input">
                            <input type="number" id="transfer-amount" min="0" step="0.01">
                            <span>ORX</span>
                        </div>
                    </div>
                    <button id="transfer-btn" class="action-btn">Transfer Token</button>
                    <div id="transfer-status" class="status-message"></div>
                </div>
            </div>
            
            <div class="transaction-history">
                <h3>Transaction History</h3>
                <div class="transaction-list" id="transaction-list">
                    <div class="empty-state">
                        Connect your wallet to see your transactions.
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="js/firebase-config.js"></script>
    
    <script src="../script.js"></script>
    <script src="../Orionix/orionix-interface.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof OrionixTokenManager !== 'undefined') {
                const tokenManager = new OrionixTokenManager();
                window.orionixToken = tokenManager;
                
                tokenManager.updateUI();
                
                const connectWalletBtn = document.getElementById('connect-wallet-btn');
                if (connectWalletBtn) {
                    connectWalletBtn.addEventListener('click', async function() {
                        try {
                            connectWalletBtn.textContent = 'Connecting...';
                            connectWalletBtn.disabled = true;
                            connectWalletBtn.classList.add('loading');
                            
                            await tokenManager.connect();
                            
                            connectWalletBtn.textContent = 'Connected';
                            connectWalletBtn.classList.remove('loading');
                            connectWalletBtn.classList.add('connected');
                            document.querySelector('.empty-state').textContent = 'No recent transactions.';
                            
                            document.getElementById('load-error-message').style.display = 'none';
                        } catch (error) {
                            console.error(error);
                            
                            connectWalletBtn.textContent = 'Connect MetaMask';
                            connectWalletBtn.disabled = false;
                            connectWalletBtn.classList.remove('loading');
                            connectWalletBtn.classList.remove('connected');
                            
                            let errorMessage = 'Connection error';
                            
                            if (error.message.includes('MetaMask is not installed')) {
                                errorMessage = 'MetaMask is not installed';
                                window.showCenterAlert('For the continue, install the MetaMask extension and create a wallet.');
                            } else if (error.message.includes('ethers.js')) {
                                errorMessage = 'Library error';
                                document.getElementById('load-error-message').style.display = 'block';
                                
                                window.showCenterAlert(`
                                    Nu s-a putut încărca biblioteca necesară. Posibile soluții:
                                    <br><br>1. Check your internet connection
                                    <br>2. Disable Ad-Blocker or other extensions that block scripts
                                    <br>3. Use an updated browser (Chrome, Firefox, Edge)
                                    <br>4. Reload the page and try again
                                `, true);
                            } else if (error.code === 4001) {
                                errorMessage = 'Connection rejected';
                                window.showCenterAlert('You rejected the connection to MetaMask. For the continue, you need to connect your wallet.');
                            } else {
                                window.showCenterAlert(`
                                    An error occurred during connection: ${error.message || 'Unknown error'}. 
                                    <br><br>Check the console for details.
                                    <br><br>Try to refresh the page and check if MetaMask is configured correctly.
                                `, true);
                            }
                            
                            document.getElementById('wallet-address').textContent = errorMessage;
                        }
                    });
                    
                    const showDetailsBtn = document.getElementById('show-details-btn');
                    if (showDetailsBtn) {
                        showDetailsBtn.addEventListener('click', function(e) {
                            e.preventDefault();
                            window.showCenterAlert(`
                                The library could not be loaded. Possible solutions:
                                <br><br>1. Check your internet connection
                                <br>2. Disable Ad-Blocker or other extensions that block scripts
                                <br>3. Use an updated browser (Chrome, Firefox, Edge)
                                <br>4. Reload the page and try again
                            `, true);
                        });
                    }
                }
            }
        });
    </script>
</body>
</html>