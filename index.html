<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto-Platform</title>
    <script>
      (function() {
        try { 
          const savedTheme = localStorage.getItem('theme');
          const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
          const theme = savedTheme || (prefersDark ? 'dark' : 'light');
          document.documentElement.setAttribute('data-theme', theme);
        } catch (e) {
          console.warn('Could not apply theme from localStorage', e);
        }
      })();
    </script>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Ethers.js va fi încărcat dinamic în orionix-interface.js -->
    <!-- Fallback pentru ethers.js - încărcăm din multiple surse pentru redundanță -->
    <script>
        // Ethers.js va fi încărcat dinamic în orionix-interface.js, dar adăugăm și un fallback direct
        if (typeof window.ethers === 'undefined') {
            // Adăugăm un script neasincron pentru a încărca ethers.js imediat
            document.write('<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js" onerror="handleEthersError()"><\/script>');
            
            // Funcție de handling pentru erori la încărcare
            function handleEthersError() {
                console.warn("Eroare la încărcarea ethers.js din CDN principal, încercăm sursă alternativă");
                document.write('<script src="./ethers.min.js"><\/script>');
            }
        }
    </script>
    
    <style>
        /* Stiluri pentru butonul de conectare wallet */
        .connect-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 20px;
            font-weight: 600;
            background: linear-gradient(135deg, var(--accent-color), var(--accent-color-dark));
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            height: 45px;
            position: relative;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .connect-btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0));
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .connect-btn:hover:before {
            opacity: 1;
        }
        
        .connect-btn:active {
            transform: scale(0.98);
        }
        
        .connect-btn.connected {
            background: linear-gradient(135deg, #10b981, #065f46);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
        }
        
        .connect-btn:disabled {
            opacity: 0.8;
            cursor: not-allowed;
        }
        
        .connect-btn:disabled:hover:before {
            opacity: 0;
        }
        
        /* Animație de loading pentru buton */
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.6; }
            100% { opacity: 1; }
        }
        
        .connect-btn.loading {
            animation: pulse 1.5s infinite;
            cursor: wait;
        }
        
        /* Stiluri pentru indicator stare contract */
        #contract-status {
            position: relative;
            display: inline-flex;
            align-items: center;
        }
        
        #contract-status:before {
            content: '';
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #10b981;
            margin-right: 6px;
        }
        
        #contract-status.error:before {
            background-color: #ef4444;
        }
        
        #contract-status.simulation:before {
            background-color: #3b82f6; /* Albastru pentru modul simulare */
        }
        
        /* Stiluri pentru carduri dezactivate */
        .action-card.disabled {
            opacity: 0.6;
            pointer-events: none;
            position: relative;
        }
        
        .action-card.disabled:after {
            content: 'Contract inactiv';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            font-weight: bold;
            border-radius: 8px;
        }
        
        /* Adăugăm un tag de simulare pentru interfață */
        .simulation-tag {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: #3b82f6;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 9999;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <a href="index.html" class="logo">Crypto-Platform</a>
        <button class="hamburger">
            <i class="fas fa-bars"></i>
        </button>
        <div class="nav-links">
            <a href="pages/news.html" class="nav-item">News</a>
            <a href="pages/prices.html" class="nav-item">Prices</a>
            <a href="pages/wallet.html" class="nav-item">Wallet</a>
            <a href="pages/trade.html" class="nav-item">Trade</a>
            <a href="pages/orionix.html" class="nav-item">Orionix</a>
            <div class="auth-buttons mobile">
                <button id="loginBtnMobile" class="auth-btn" onclick="window.location.href='pages/login.html'">Login</button>
                <button id="signupBtnMobile" class="auth-btn" onclick="window.location.href='pages/signup.html'">Sign Up</button>
            </div>
            <button id="themeToggleBtnMobile" class="theme-toggle-btn mobile">
                <i class="fas fa-moon"></i>
            </button>
        </div>
        <div class="controls-desktop">
            <button id="notificationBtn" class="notification-btn">
                <i class="fas fa-bell"></i>
                <span class="alert-badge"></span>
            </button>
            <button id="themeToggleBtn" class="theme-toggle-btn">
                <i class="fas fa-moon"></i>
            </button>
            <div class="auth-buttons desktop">
                <button id="loginBtn" class="auth-btn" onclick="window.location.href='pages/login.html'">Login</button>
                <button id="signupBtn" class="auth-btn" onclick="window.location.href='pages/signup.html'">Sign Up</button>
            </div>
        </div>
    </nav>
    
    <main class="hero-section">
        <h1 class="hero-heading">Crypto Trading Platform</h1>
        <p class="hero-subheading">Buy Bitcoin, Ethereum, Orionix and many more cryptocurrencies</p>
        <div class="hero-container">
            <div class="crypto-cards">
                <div class="crypto-card" id="bitcoin-card">
                    <div class="crypto-icon">
                        <img src="https://assets.coingecko.com/coins/images/1/small/bitcoin.png" alt="Bitcoin" id="btc-icon">
                    </div>
                    <div class="crypto-name">Bitcoin</div>
                    
                    <div class="price-label">PRICE</div>
                    <div class="price-value" id="btc-price">96,878.75 USD</div>
                    
                    <div class="chart-container">
                        <canvas id="btc-chart"></canvas>
                    </div>
                    
                    <div class="stats-row">
                        <div>
                            <div class="volume-label">24H VOLUME</div>
                            <div class="volume-value" id="btc-volume">21.9K</div>
                        </div>
                        <div>
                            <div class="change-label">24H CHANGE</div>
                            <div class="change-value change-negative" id="btc-change">-0.85%</div>
                        </div>
                    </div>
                </div>
                
                <div class="crypto-card" id="orionix-card">
                    <div class="crypto-icon">
                        <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDYwIDYwIj48Y2lyY2xlIGN4PSIzMCIgY3k9IjMwIiByPSIyOCIgZmlsbD0iIzNiODJmNiIvPjx0ZXh0IHg9IjMwIiB5PSIzOCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjIwIiBmb250LXdlaWdodD0iYm9sZCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iI2ZmZmZmZiI+T1JYPC90ZXh0Pjwvc3ZnPg==" alt="Orionix" id="orx-icon">
                    </div>
                    <div class="crypto-name">Orionix</div>
                    
                    <div class="price-label">PRICE</div>
                    <div class="price-value" id="orx-price">4.48 USD</div>
                    
                    <div class="chart-container">
                        <canvas id="orx-chart"></canvas>
                    </div>
                    
                    <div class="stats-row">
                        <div>
                            <div class="volume-label">24H VOLUME</div>
                            <div class="volume-value" id="orx-volume">138.3K</div>
                        </div>
                        <div>
                            <div class="change-label">24H CHANGE</div>
                            <div class="change-value change-positive" id="orx-change">+1.15%</div>
                        </div>
                    </div>
                </div>
                
                <div class="crypto-card" id="ethereum-card">
                    <div class="crypto-icon">
                        <img src="https://assets.coingecko.com/coins/images/279/small/ethereum.png" alt="Ethereum" id="eth-icon">
                    </div>
                    <div class="crypto-name">Ethereum</div>
                    
                    <div class="price-label">PRICE</div>
                    <div class="price-value" id="eth-price">3,401.98 USD</div>
                    
                    <div class="chart-container">
                        <canvas id="eth-chart"></canvas>
                    </div>
                    
                    <div class="stats-row">
                        <div>
                            <div class="volume-label">24H VOLUME</div>
                            <div class="volume-value" id="eth-volume">98.8K</div>
                        </div>
                        <div>
                            <div class="change-label">24H CHANGE</div>
                            <div class="change-value change-positive" id="eth-change">+0.77%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <section id="compare-section" class="compare-section">
        <div class="container">
            <h2 class="compare-heading">Compare Cryptocurrencies</h2>
            
            <div class="compare-container">
                <!-- Orionix Card - Fixed -->
                <div class="crypto-compare-card">
                    <div class="crypto-header">
                        <div class="crypto-icon">
                            <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDYwIDYwIj48Y2lyY2xlIGN4PSIzMCIgY3k9IjMwIiByPSIyOCIgZmlsbD0iIzNiODJmNiIvPjx0ZXh0IHg9IjMwIiB5PSIzOCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjIwIiBmb250LXdlaWdodD0iYm9sZCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iI2ZmZmZmZiI+T1JYPC90ZXh0Pjwvc3ZnPg==" alt="Orionix">
                        </div>
                        <div class="crypto-name">
                            <h3>Orionix</h3>
                            <span class="crypto-symbol">ORX</span>
                        </div>
                    </div>
                    
                    <div class="crypto-data">
                        <div class="data-row">
                            <span class="data-label">PRICE</span>
                            <div class="data-value-container">
                                <span class="data-value" id="orx-compare-price">$4.25</span>
                                <span class="change-badge positive" id="orx-compare-change">+1.22%</span>
                            </div>
                        </div>
                        
                        <div class="data-row">
                            <span class="data-label">VOLUME (24H)</span>
                            <span class="data-value" id="orx-compare-volume">$138.32M</span>
                        </div>
                        
                        <div class="data-row">
                            <span class="data-label">MARKET CAP</span>
                            <span class="data-value" id="orx-compare-mcap">$147,000,000</span>
                        </div>
                    </div>
                    
                    <div class="crypto-chart-container">
                        <canvas id="orx-compare-chart" style="width:100%; height:100%;"></canvas>
                    </div>
                </div>
                
                <!-- VS -->
                <div class="vs-container">
                    <span class="vs-text">VS</span>
                </div>
                
                <!-- Other Crypto Card - Selectable -->
                <div class="crypto-compare-card">
                    <div class="crypto-header">
                        <div class="crypto-icon">
                            <img src="https://assets.coingecko.com/coins/images/1/small/bitcoin.png" alt="Bitcoin" id="compare-coin-icon">
                        </div>
                        <div class="crypto-name">
                            <div class="crypto-select-container">
                                <select id="crypto-compare-select" class="crypto-select">
                                    <option value="bitcoin">Bitcoin</option>
                                    <option value="ethereum">Ethereum</option>
                                    <option value="litecoin">Litecoin</option>
                                    <option value="ripple">XRP</option>
                                    <option value="cardano">Cardano</option>
                                    <option value="solana">Solana</option>
                                </select>
                            </div>
                            <span class="crypto-symbol" id="compare-coin-symbol">BTC</span>
                        </div>
                    </div>
                    
                    <div class="crypto-data">
                        <div class="data-row">
                            <span class="data-label">PRICE</span>
                            <div class="data-value-container">
                                <span class="data-value" id="compare-coin-price">$86037.88</span>
                                <span class="change-badge positive" id="compare-coin-change">+1.22%</span>
                            </div>
                        </div>
                        
                        <div class="data-row">
                            <span class="data-label">VOLUME (24H)</span>
                            <span class="data-value" id="compare-coin-volume">$27.28B</span>
                        </div>
                        
                        <div class="data-row">
                            <span class="data-label">MARKET CAP</span>
                            <span class="data-value" id="compare-coin-mcap">$1.63T</span>
                        </div>
                    </div>
                    
                    <div class="crypto-chart-container">
                        <canvas id="compare-coin-chart" style="width:100%; height:100%;"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="script.js" defer></script>
    <script>
        // Script pentru inițializarea graficelor de comparare
        window.addEventListener('load', function() {
            // Verificăm dacă secțiunea de comparare există
            const compareSection = document.getElementById('compare-section');
            if (!compareSection) return;
            
            // Verificăm dacă funcțiile necesare sunt disponibile
            if (typeof initCryptoCompare === 'function') {
                console.log('Inițializăm graficele de comparare după încărcarea completă a paginii');
                setTimeout(function() {
                    initCryptoCompare();
                    
                    // Forțăm re-inițializarea graficelor după un scurt delay
                    setTimeout(function() {
                        if (typeof generateCompareChartData === 'function' && typeof updateCompareChart === 'function') {
                            const orxData = generateCompareChartData(4.25, 1.22);
                            updateCompareChart('orx-compare-chart', orxData, '#10b981');
                            
                            const btcData = generateCompareChartData(86037.88, 1.22);
                            updateCompareChart('compare-coin-chart', btcData, '#f7931a');
                            
                            console.log('Graficele au fost re-inițializate cu succes');
                        }
                    }, 500);
                }, 100);
            }
        });
    </script>
    <!-- Script special pentru inițializarea directă a graficelor de comparare -->
    <script>
    (function() {
        function initializeCompareCharts() {
            console.log("Inițializare directă a graficelor de comparare...");
            
            // Verificăm elementele canvas
            const orxChart = document.getElementById('orx-compare-chart');
            const compareChart = document.getElementById('compare-coin-chart');
            
            if (!orxChart || !compareChart) {
                console.log("Elementele canvas nu sunt încă disponibile, reîncercăm în 500ms");
                setTimeout(initializeCompareCharts, 500);
                return;
            }
            
            // Funcție simplificată pentru generarea datelor
            function generateSimpleData(basePrice, isPositive) {
                const points = 24 * 2;
                const data = { labels: [], prices: [] };
                const now = new Date();
                
                for (let i = 0; i < points; i++) {
                    // Generăm etichete simple pentru ore
                    if (i % 2 === 0) {
                        const hour = (now.getHours() - Math.floor((points - i) / 2)) % 24;
                        data.labels.push(hour.toString().padStart(2, '0') + ':00');
                    } else {
                        data.labels.push('');
                    }
                    
                    // Generăm prețuri cu trend
                    const progress = i / (points - 1);
                    const random = Math.sin(i * 0.5) * 0.02;
                    const trend = isPositive ? 
                        basePrice * (0.97 + progress * 0.05) : 
                        basePrice * (1.03 - progress * 0.05);
                    
                    data.prices.push(trend * (1 + random));
                }
                
                return data;
            }
            
            // Funcție simplificată pentru desenarea graficului
            function drawSimpleChart(canvas, data, color) {
                const ctx = canvas.getContext('2d');
                if (!ctx) return;
                
                // Curățăm canvas-ul
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Setăm dimensiunile corecte
                const containerWidth = canvas.parentElement.clientWidth || 400;
                const containerHeight = canvas.parentElement.clientHeight || 200;
                canvas.width = containerWidth;
                canvas.height = containerHeight;
                
                // Găsim valorile min și max pentru scalare
                const minPrice = Math.min(...data.prices) * 0.995;
                const maxPrice = Math.max(...data.prices) * 1.005;
                const priceRange = maxPrice - minPrice;
                
                // Calculăm scalarea pentru a desena în canvas
                const xScale = containerWidth / (data.prices.length - 1);
                const yScale = containerHeight / priceRange;
                
                // Desenăm linia
                ctx.beginPath();
                ctx.moveTo(0, containerHeight - (data.prices[0] - minPrice) * yScale);
                
                for (let i = 1; i < data.prices.length; i++) {
                    const x = i * xScale;
                    const y = containerHeight - (data.prices[i] - minPrice) * yScale;
                    ctx.lineTo(x, y);
                }
                
                ctx.strokeStyle = color;
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // Desenăm fill sub linie
                ctx.lineTo(containerWidth, containerHeight);
                ctx.lineTo(0, containerHeight);
                ctx.closePath();
                
                const gradient = ctx.createLinearGradient(0, 0, 0, containerHeight);
                gradient.addColorStop(0, color + '40');
                gradient.addColorStop(0.7, color + '10');
                gradient.addColorStop(1, color + '00');
                
                ctx.fillStyle = gradient;
                ctx.fill();
                
                console.log("Grafic desenat cu succes:", canvas.id);
            }
            
            // Desenăm graficele
            const orxData = generateSimpleData(4.25, true);
            drawSimpleChart(orxChart, orxData, '#10b981');
            
            const btcData = generateSimpleData(86037.88, true);
            drawSimpleChart(compareChart, btcData, '#f7931a');
            
            console.log("Ambele grafice au fost inițializate cu succes");
        }
        
        // Pornim inițializarea după încărcarea completă a paginii
        if (document.readyState === 'complete') {
            initializeCompareCharts();
        } else {
            window.addEventListener('load', function() {
                setTimeout(initializeCompareCharts, 100);
            });
        }
    })();
    </script>
    <!-- Script pentru a afișa un indicator de simulare -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Verificăm după încărcarea paginii dacă suntem în modul simulare
            if (typeof window.orionixInfo !== 'undefined' && window.orionixInfo.simulationMode) {
                // Creăm un element pentru a indica modul de simulare
                const simulationTag = document.createElement('div');
                simulationTag.className = 'simulation-tag';
                simulationTag.innerHTML = 'MOD SIMULARE';
                document.body.appendChild(simulationTag);
                
                console.log('Aplicația rulează în modul simulare. Toate tranzacțiile sunt simulate, nu reale.');
            }
        });
    </script>
</body>
</html> 